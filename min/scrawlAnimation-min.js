/*! scrawl-canvas 2017-01-29 */
if(window.scrawl&&window.scrawl.work.extensions&&!window.scrawl.contains(window.scrawl.work.extensions,"animation"))var scrawl=function(a){"use strict";return a.work.d.Position.delta={x:0,y:0,z:0},a.work.d.Position.deltaPathPlace=0,a.work.d.Position.pathSpeedConstant=!0,a.work.d.Position.tweenLock=!1,a.mergeInto(a.work.d.Cell,a.work.d.Position),a.mergeInto(a.work.d.Entity,a.work.d.Position),a.xt(a.work.d.Block)&&a.mergeInto(a.work.d.Block,a.work.d.Entity),a.xt(a.work.d.Shape)&&a.mergeInto(a.work.d.Shape,a.work.d.Entity),a.xt(a.work.d.Wheel)&&a.mergeInto(a.work.d.Wheel,a.work.d.Entity),a.xt(a.work.d.Picture)&&a.mergeInto(a.work.d.Picture,a.work.d.Entity),a.xt(a.work.d.Phrase)&&a.mergeInto(a.work.d.Phrase,a.work.d.Entity),a.xt(a.work.d.Path)&&a.mergeInto(a.work.d.Path,a.work.d.Entity),a.work.d.PageElement.tweenLock=!1,a.mergeInto(a.work.d.Pad,a.work.d.PageElement),a.xt(a.work.d.Stack)&&a.mergeInto(a.work.d.Stack,a.work.d.PageElement),a.xt(a.work.d.Element)&&a.mergeInto(a.work.d.Element,a.work.d.PageElement),a.pushUnique(a.work.sectionlist,"tween"),a.pushUnique(a.work.nameslist,"tweennames"),a.convertTime=function(b){var c,d,e;if(a.xt(b)){if(b.toFixed)return["ms",b];switch(c=b.match(/^\d+\.?\d*(\D*)/),d=c[1].toLowerCase?c[1].toLowerCase():"ms"){case"s":e=1e3*parseFloat(b);break;case"%":e=parseFloat(b);break;default:d="ms",e=parseFloat(b)}return[d,e]}return!1},a.addWithinBounds=function(a,b){var c=a+b;return c>1?c-1:0>c?c+1:c},a.Position.prototype.animationPositionInit=function(b){var c=a.safeObject(b.delta),d=a.makeVector,e=a.xtGet,f=a.work.d[this.type];this.delta=d({name:this.type+"."+this.name+".delta",x:e(b.deltaX,c.x,0),y:e(b.deltaY,c.y,0)}),this.pathSpeedConstant=e(b.pathSpeedConstant,f.pathSpeedConstant),this.deltaPathPlace=e(b.deltaPathPlace,f.deltaPathPlace)},a.Position.prototype.animationPositionGet=function(b){var c=["deltaX","deltaY"];if(a.contains(c,b))switch(b){case"deltaX":return this.delta.x;case"deltaY":return this.delta.y}return"delta"===b?this.delta.getVector():!1},a.Position.prototype.animationPositionSet=function(b){a.xto(b.delta,b.deltaX,b.deltaY)&&this.setDeltaAttribute(b)},a.Position.prototype.setDeltaAttribute=function(b){var c,d=a.safeObject,e=a.xtGet;return b=d(b),a.isa_vector(this.delta)||(this.delta=a.makeVector(b.delta||this.delta)),c=d(b.delta),this.delta.x=e(b.deltaX,c.x,this.delta.x),this.delta.y=e(b.deltaY,c.y,this.delta.y),this},a.Position.prototype.animationPositionClone=function(b,c){var d=a.safeObject(c.delta),e=a.xtGet;return b.delta=a.makeVector({x:e(c.deltaX,d.x,b.delta.x),y:e(c.deltaY,d.y,b.delta.y)}),b},a.Position.prototype.updateStart=function(b){return b=a.xtGet(b,"all"),this.updateStartActions[b](a.addPercentages,this.start,this.delta,a.addWithinBounds,this),this.currentStart.flag=!1,a.xt(this.collisionArray)&&(this.collisionArray.length=0),this},a.Position.prototype.updateStartActions={x:function(a,b,c){b.x=b.x.toFixed?b.x+c.x:a(b.x,c.x)},y:function(a,b,c){b.y=b.y.toFixed?b.y+c.y:a(b.y,c.y)},path:function(a,b,c,d,e){e.pathPlace=d(e.pathPlace,e.deltaPathPlace)},all:function(a,b,c,d,e){e.deltaPathPlace&&(e.pathPlace=d(e.pathPlace,e.deltaPathPlace)),c.x&&(b.x=b.x.toFixed?b.x+c.x:a(b.x,c.x)),c.y&&(b.y=b.y.toFixed?b.y+c.y:a(b.y,c.y))}},a.Position.prototype.revertStart=function(b){return b=a.xtGet(b,"all"),this.revertStartActions[b](a.subtractPercentages,this.start,this.delta,a.addWithinBounds,this),this.currentStart.flag=!1,a.xt(this.collisionArray)&&(this.collisionArray.length=0),this},a.Position.prototype.revertStartActions={x:function(a,b,c){b.x=b.x.toFixed?b.x-c.x:a(b.x,c.x)},y:function(a,b,c){b.y=b.y.toFixed?b.y-c.y:a(b.y,c.y)},path:function(a,b,c,d,e){e.pathPlace=d(e.pathPlace,-e.deltaPathPlace)},all:function(a,b,c,d,e){e.deltaPathPlace&&(e.pathPlace=d(e.pathPlace,-e.deltaPathPlace)),c.x&&(b.x=b.x.toFixed?b.x-c.x:a(b.x,c.x)),c.y&&(b.y=b.y.toFixed?b.y-c.y:a(b.y,c.y))}},a.Position.prototype.exchange=function(b,c){var d;return a.isa_obj(b)&&(d=this[c]||this.get(c),this[c]=b[c]||b.get(c),b[c]=d),this},a.Position.prototype.reverse=function(b){return b=a.xtGet(b,"all"),this.reverseActions[b](this.delta,a.reversePercentage,this),this},a.Position.prototype.reverseActions={deltaX:function(a,b){a.x=a.x.toFixed?-a.x:b(a.x)},deltaY:function(a,b){a.y=a.y.toFixed?-a.y:b(a.y)},delta:function(a,b){a.x=a.x.toFixed?-a.x:b(a.x),a.y=a.y.toFixed?-a.y:b(a.y)},deltaPathPlace:function(a,b,c){c.deltaPathPlace=-c.deltaPathPlace},all:function(a,b,c){c.deltaPathPlace=-c.deltaPathPlace,a.x=a.x.toFixed?-a.x:b(a.x),a.y=a.y.toFixed?-a.y:b(a.y)}},a.work.d.Cell.copyDelta={x:0,y:0},a.work.d.Cell.copyMinWidth=0,a.work.d.Cell.copyMaxWidth=0,a.work.d.Cell.copyMinHeight=0,a.work.d.Cell.copyMaxHeight=0,a.Cell.prototype.animationCellInit=function(b){var c=a.safeObject(b.copyDelta),d=a.xtGet;this.copyDelta=a.makeVector({x:d(b.copyDeltaX,c.x,0),y:d(b.copyDeltaY,c.y,0)})},a.Cell.prototype.animationCellGet=function(b){var c=["copyDeltaX","copyDeltaY"];if(a.contains(c,b))switch(b){case"copyDeltaX":return this.copyDelta.x;case"copyDeltaY":return this.copyDelta.y}return a.Base.prototype.get.call(this,b)},a.Cell.prototype.animationCellSet=function(b){var c,d=a.xtGet;a.xto(b.copyDelta,b.copyDeltaX,b.copyDeltaY)&&(c=a.safeObject(b.copyDelta),this.copyDelta.x=d(b.copyDeltaX,c.x,this.copyDelta.x),this.copyDelta.y=d(b.copyDeltaY,c.y,this.copyDelta.y))},a.Cell.prototype.updateStart=function(b){return b=a.xtGet(b,"all"),this.updateStartActions[b](a.addPercentages,this.start,this.delta,this.copy,this.copyDelta,a.addWithinBounds,this),this.currentStart.flag=!1,this},a.Cell.prototype.updateStartActions={x:function(a,b,c,d,e){c.x&&(b.x=b.x.toFixed?b.x+c.x:a(b.x,c.x)),e.x&&(d.x=d.x.toFixed?d.x+e.x:a(d.x,e.x))},y:function(a,b,c,d,e){c.y&&(b.y=b.y.toFixed?b.y+c.y:a(b.y,c.y)),e.y&&(d.y=d.y.toFixed?d.y+e.y:a(d.y,e.y))},start:function(a,b,c){c.x&&(b.x=b.x.toFixed?b.x+c.x:a(b.x,c.x)),c.y&&(b.y=b.y.toFixed?b.y+c.y:a(b.y,c.y))},paste:function(a,b,c){c.x&&(b.x=b.x.toFixed?b.x+c.x:a(b.x,c.x)),c.y&&(b.y=b.y.toFixed?b.y+c.y:a(b.y,c.y))},copy:function(a,b,c,d,e){e.x&&(d.x=d.x.toFixed?d.x+e.x:a(d.x,e.x)),e.y&&(d.y=d.y.toFixed?d.y+e.y:a(d.y,e.y))},path:function(a,b,c,d,e,f,g){g.pathPlace=f(g.pathPlace,g.deltaPathPlace)},all:function(a,b,c,d,e,f,g){g.deltaPathPlace&&(g.pathPlace=f(g.pathPlace,g.deltaPathPlace)),c.x&&(b.x=b.x.toFixed?b.x+c.x:a(b.x,c.x)),c.y&&(b.y=b.y.toFixed?b.y+c.y:a(b.y,c.y)),e.x&&(d.x=d.x.toFixed?d.x+e.x:a(d.x,e.x)),e.y&&(d.y=d.y.toFixed?d.y+e.y:a(d.y,e.y))}},a.Cell.prototype.revertStart=function(b){return b=a.xtGet(b,"all"),this.revertStartActions[b](a.subtractPercentages,this.start,this.delta,this.copy,this.copyDelta,a.addWithinBounds,this),this.currentStart.flag=!1,this},a.Cell.prototype.revertStartActions={x:function(a,b,c,d,e){c.x&&(b.x=b.x.toFixed?b.x-c.x:a(b.x,c.x)),e.x&&(d.x=d.x.toFixed?d.x-e.x:a(d.x,e.x))},y:function(a,b,c,d,e){c.y&&(b.y=b.y.toFixed?b.y-c.y:a(b.y,c.y)),e.y&&(d.y=d.y.toFixed?d.y-e.y:a(d.y,e.y))},start:function(a,b,c){c.x&&(b.x=b.x.toFixed?b.x-c.x:a(b.x,c.x)),c.y&&(b.y=b.y.toFixed?b.y-c.y:a(b.y,c.y))},paste:function(a,b,c){c.x&&(b.x=b.x.toFixed?b.x-c.x:a(b.x,c.x)),c.y&&(b.y=b.y.toFixed?b.y-c.y:a(b.y,c.y))},copy:function(a,b,c,d,e){e.x&&(d.x=d.x.toFixed?d.x-e.x:a(d.x,e.x)),e.y&&(d.y=d.y.toFixed?d.y-e.y:a(d.y,e.y))},path:function(a,b,c,d,e,f,g){g.pathPlace=f(g.pathPlace,-g.deltaPathPlace)},all:function(a,b,c,d,e,f,g){g.deltaPathPlace&&(g.pathPlace=f(g.pathPlace,-g.deltaPathPlace)),c.x&&(b.x=b.x.toFixed?b.x-c.x:a(b.x,c.x)),c.y&&(b.y=b.y.toFixed?b.y-c.y:a(b.y,c.y)),e.x&&(d.x=d.x.toFixed?d.x-e.x:a(d.x,e.x)),e.y&&(d.y=d.y.toFixed?d.y-e.y:a(d.y,e.y))}},a.Cell.prototype.zoom=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;return b.toFixed&&(c=this.copyWidth,d=this.copyHeight,e=this.actualWidth,f=this.actualHeight,g=a.xtGet(this.copyMinWidth,this.copyWidth),h=a.xtGet(this.copyMinHeight,this.copyHeight),i=a.xtGet(this.copyMaxWidth,this.copyWidth),j=a.xtGet(this.copyMaxHeight,this.copyHeight),k=this.copy.x,l=this.copy.y,m=c+b,n=d+b,a.isBetween(m,g,i,!0)&&a.isBetween(n,h,j,!0)&&(c=m,o=k-b/2,k=0>o?0:o>e-c?e-c:o,d=n,p=l-b/2,l=0>p?0:p>f-d?f-d:p,this.copy.x=k,this.copy.y=l,this.copyWidth=c,this.copyHeight=d)),this},a.Cell.prototype.spliceCell=function(b){var c,d,e,f,g,h,i,j,k=["horizontal","vertical","top","bottom","left","right"],l=a.work.cv,m=a.work.cvx;if(b=a.safeObject(b),a.contains(k,b.edge)){switch(f=a.xtGet(b.shiftCopy,!1),g=this.actualHeight,h=this.actualWidth,i=a.context[this.name],j=a.canvas[this.name],l.width=h,l.height=g,i.setTransform(1,0,0,1,0,0),b.edge){case"horizontal":d=h/2,c=d,e="left";break;case"vertical":d=g/2,c=d,e="top";break;case"top":case"bottom":c=a.xtGet(b.strip,20),d=g-c,e=b.edge;break;case"left":case"right":c=a.xtGet(b.strip,20),d=h-c,e=b.edge}switch(e){case"top":m.drawImage(j,0,0,h,c,0,d,h,c),m.drawImage(j,0,c,h,d,0,0,h,d),this.copy.y-=f?c:0;break;case"bottom":m.drawImage(j,0,0,h,d,0,c,h,d),m.drawImage(j,0,d,h,c,0,0,h,c),this.copy.y+=f?c:0;break;case"left":m.drawImage(j,0,0,c,g,d,0,c,g),m.drawImage(j,c,0,d,g,0,0,d,g),this.copy.x-=f?c:0;break;case"right":m.drawImage(j,0,0,d,g,c,0,d,g),m.drawImage(j,d,0,c,g,0,0,c,g),this.copy.x+=f?c:0}i.clearRect(0,0,h,g),i.drawImage(l,0,0,h,g),f&&this.setCopy()}return this},a.Group.prototype.updateStart=function(b){for(var c=this.entitys,d=a.entity,e=0,f=c.length;f>e;e++)d[c[e]].updateStart(b);return this},a.Group.prototype.revertStart=function(b){for(var c=this.entitys,d=a.entity,e=0,f=c.length;f>e;e++)d[c[e]].revertStart(b);return this},a.Group.prototype.reverse=function(b){for(var c=this.entitys,d=a.entity,e=0,f=c.length;f>e;e++)d[c[e]].reverse(b);return this},a.work.d.Design.shift=0,a.work.d.Design.autoUpdate=!1,a.mergeInto(a.work.d.Gradient,a.work.d.Design),a.mergeInto(a.work.d.RadialGradient,a.work.d.Design),a.xt(a.work.d.Pattern)&&a.mergeInto(a.work.d.Pattern,a.work.d.Design),a.Design.prototype.update=function(a,b){return this.makeGradient(a,b),this.sortStops(),this.applyStops(),this},a.Design.prototype.sortStops=function(){var b,c,d,e;for(b=this.get("color"),c=this.get("shift"),d=0,e=b.length;e>d;d++)b[d].stop+=c,a.isBetween(b[d].stop,0,1,!0)||(b[d].stop=b[d].stop>.5?b[d].stop-1:b[d].stop+1),b[d].stop<=0?b[d].stop=1e-6:b[d].stop>=1&&(b[d].stop=.999999);b.sort(function(a,b){return a.stop-b.stop}),this.color=b},a.makeTicker=function(b){return new a.Ticker(b)},a.makeTween=function(b){return new a.Tween(b)},a.makeAction=function(b){return new a.Action(b)},a.locateTarget=function(b){var c,d,e,f,g=["entity","cell","pad","stack","element","point","group","design","animation","tween","anim","filter","image","force","spring","physics"],h=(a.contains,a.xt);if(a.xt(b)&&b.substring)for(e=0,f=g.length;f>e;e++)if(c=g[e],d=c+"names",h(a[d])&&a[d].indexOf(b)>=0)return a[c][b];return!1},a.Ticker=function(b){var c=a.xtGet;return a.Base.call(this,b),b=a.safeObject(b),this.order=c(b.order,0),this.subscribers=[],this.duration=c(b.duration,0),this.eventChoke=c(b.eventChoke,0),this.killOnComplete=c(b.killOnComplete,!1),this.cycles=c(b.cycles,1),this.cycleCount=0,this.active=!1,this.effectiveDuration=0,this.startTime=0,this.currentTime=0,this.tick=0,this.lastEvent=0,b.subscribers&&this.subscribe(b.subscribers),this.setEffectiveDuration(),a.animation[this.name]=this,a.pushUnique(a.animationnames,this.name),this},a.Ticker.prototype=Object.create(a.Base.prototype),a.Ticker.prototype.type="Ticker",a.Ticker.prototype.classname="animationnames",a.work.d.Ticker={order:0,duration:0,subscribers:[],killOnComplete:!1,cycles:1,eventChoke:0},a.mergeInto(a.work.d.Ticker,a.work.d.Base),a.Ticker.prototype.makeTickerUpdateEvent=function(){var a=null,b={name:this.name,type:"Ticker",tick:this.tick,reverseTick:this.effectiveDuration-this.tick};return window.MSInputMethodContext?(a=document.createEvent("CustomEvent"),a.initCustomEvent("tickerupdate",!0,!0,b)):window.CustomEvent&&(a=new CustomEvent("tickerupdate",{detail:b,bubbles:!0,cancelable:!0})),a},a.Ticker.prototype.subscribe=function(b){var c,d,e,f,g,h=[].concat(b),i=a.pushUnique,j=a.safeObject;for(c=0,d=h.length;d>c;c++)e=h[c],e.substring?g=e:(f=j(e),g=f.name||!1),g&&i(this.subscribers,g);return h.length&&(this.sortSubscribers(),this.recalculateEffectiveDuration()),this},a.Ticker.prototype.unsubscribe=function(b){var c,d,e,f,g,h=[].concat(b),i=a.removeItem,j=a.safeObject;for(c=0,d=h.length;d>c;c++)e=b[c],e.substring?g=e:(f=j(e),g=f.name||!1),g&&i(this.subscribers,g);return h.length&&(this.sortSubscribers(),this.recalculateEffectiveDuration()),this},a.Ticker.prototype.recalculateEffectiveDuration=function(){var b,c,d,e,f=0,g=a.tween;if(this.duration)this.setEffectiveDuration();else{for(b=0,c=this.subscribers.length;c>b;b++)d=g[this.subscribers[b]],e=d.getEndTime(),e>f&&(f=e);this.effectiveDuration=f}return this},a.Ticker.prototype.setEffectiveDuration=function(){var b;return this.duration&&(b=a.convertTime(this.duration),"%"===b[0]?(this.duration=0,this.recalculateEffectiveDuration()):this.effectiveDuration=b[1]),this},a.Ticker.prototype.sortSubscribers=function(){a.bucketSort("tween","effectiveTime",this.subscribers)},a.Ticker.prototype.set=function(b){b=a.safeObject(b);var c,d,e,f=a.xt;if(f(b.order)&&(this.order=b.order,this.active&&(a.work.resortAnimations=!0)),f(b.cycles)&&(this.cycles=b.cycles,this.cycles||(this.cycleCount=0)),f(b.subscribers)&&(this.subscribers=[],this.subscribe(b.subscribers)),f(b.duration))for(this.duration=b.duration,this.setEffectiveDuration(),c=0,d=this.subscribers.length;d>c;c++)e=a.tween[this.subscribers[c]],e.calculateEffectiveTime(),"Tween"===e.type&&e.calculateEffectiveDuration();return f(b.killOnComplete)&&(this.killOnComplete=b.killOnComplete),f(b.eventChoke)&&(this.eventChoke=b.eventChoke),this},a.Ticker.prototype.fn=function(b){var c,d,e,f,g,h,i,j=a.tween,k={tick:0,reverseTick:0,willLoop:!1,next:!1};if(b=a.xt(b)?b:!1,this.active&&this.startTime&&(!this.cycles||this.cycleCount<this.cycles)){for(this.currentTime=Date.now(),this.tick=this.currentTime-this.startTime,!this.cycles||this.cycleCount+1<this.cycles?(this.tick>=this.effectiveDuration?(this.tick=0,this.startTime=this.currentTime,k.tick=this.effectiveDuration,k.reverseTick=0,k.willLoop=!0,this.cycles&&this.cycleCount++):(k.tick=this.tick,k.reverseTick=this.effectiveDuration-this.tick),k.next=!0):this.tick>=this.effectiveDuration?(k.tick=this.effectiveDuration,k.reverseTick=0,this.active=!1,this.cycles&&this.cycleCount++):(k.tick=this.tick,k.reverseTick=this.effectiveDuration-this.tick,k.next=!0),e=[].concat(this.subscribers),b&&e.reverse(),c=0,d=e.length;d>c;c++)f=j[e[c]],f.update(k);this.eventChoke&&(g=this.lastEvent+this.eventChoke,h=Date.now(),h>g&&(i=this.makeTickerUpdateEvent(),window.dispatchEvent(i),this.lastEvent=h)),this.active||this.halt(),this.killOnComplete&&this.cycleCount>=this.cycles&&this.killTweens(!0)}return this},a.Ticker.prototype.updateSubscribers=function(b,c){var d=[].concat(this.subscribers);c=a.xt(c)?c:!1,c&&d.reverse();for(var e=0,f=d.length;f>e;e++)scrawl.tween[d[e]].set(b);return this},a.Ticker.prototype.changeSubscriberDirection=function(){for(var a,b=[].concat(this.subscribers),c=0,d=b.length;d>c;c++)a=scrawl.tween[b[c]],a.reversed=!a.reversed;return this},a.Ticker.prototype.run=function(){return this.active||(this.startTime=this.currentTime=Date.now(),this.cycleCount=0,this.updateSubscribers({reversed:!1}),this.active=!0,this.fn(!0),a.pushUnique(a.work.animate,this.name),a.work.resortAnimations=!0),this},a.Ticker.prototype.reset=function(){return this.active&&this.halt(),this.startTime=this.currentTime=Date.now(),this.cycleCount=0,this.updateSubscribers({reversed:!1}),this.active=!0,this.fn(!0),this.active=!1,this},a.Ticker.prototype.complete=function(){return this.active&&this.halt(),this.startTime=this.currentTime=Date.now(),this.cycleCount=0,this.updateSubscribers({reversed:!0}),this.active=!0,this.fn(),this.active=!1,this},a.Ticker.prototype.reverse=function(){var a;return this.active&&this.halt(),a=this.currentTime-this.startTime,this.startTime=this.currentTime-(this.effectiveDuration-a),this.changeSubscriberDirection(),this.active=!0,this.fn(),this.active=!1,this},a.Ticker.prototype.halt=function(){return this.active=!1,a.removeItem(a.work.animate,this.name),a.work.resortAnimations=!0,this},a.Ticker.prototype.resume=function(){var b,c,d;return this.active||(b=Date.now(),c=this.currentTime,d=this.startTime,this.startTime=b-(c-d),this.currentTime=b,this.active=!0,a.pushUnique(a.work.animate,this.name),a.work.resortAnimations=!0),this},a.Ticker.prototype.seekTo=function(b,c){var d=a.xtGet,e=!1;return b=d(b,0),c=d(c,!1),this.active&&this.halt(),this.cycles&&this.cycleCount>=this.cycles&&(this.cycleCount=this.cycles-1),b<this.tick&&(e=!0),this.currentTime=Date.now(),this.startTime=this.currentTime-b,this.active=!0,this.fn(e),this.active=!1,c&&this.resume(),this},a.Ticker.prototype.seekFor=function(b,c){var d=a.xtGet,e=!1;return b=d(b,0),b=d(c,!1),this.active&&this.halt(),this.cycles&&this.cycleCount>=this.cycles&&(this.cycleCount=this.cycles-1),this.startTime-=b,0>b&&(e=!0),this.active=!0,this.fn(e),this.active=!1,c&&this.resume(),this},a.Ticker.prototype.kill=function(){return this.active&&this.halt(),delete a.animation[this.name],a.removeItem(a.animationnames,this.name),a.removeItem(a.work.animate,this.name),a.work.resortAnimations=!0,!0},a.Ticker.prototype.killTweens=function(b){var c,d,e,f=a.tween,b=a.xt(b)?b:!1;for(c=0,d=this.subscribers.length;d>c;c++)e=f[this.subscribers[c]],e.kill();return b?(this.kill(),!0):this},a.Action=function(b){var c=a.xtGet;return a.Base.call(this,b),b=a.safeObject(b),a.xt(b.targets)?this.setTargets(b.targets):this.targets=[],this.reverseOnCycleEnd=c(b.reverseOnCycleEnd,!1),this.reversed=c(b.reversed,!1),this.action="function"==typeof b.action?b.action:function(){},this.revert="function"==typeof b.revert?b.revert:function(){},this.time=c(b.time,0),this.order=c(b.order,0),this.triggered=!1,this.calculateEffectiveTime(),a.tween[this.name]=this,a.pushUnique(a.tweennames,this.name),this.ticker="",a.xt(b.ticker)&&this.addToTicker(b.ticker),this},a.Action.prototype=Object.create(a.Base.prototype),a.Action.prototype.type="Action",a.Action.prototype.classname="tweennames",a.work.d.Action={ticker:"",targets:[],action:function(){},revert:function(){},time:0,reverseOnCycleEnd:!1,reversed:!1,order:0},a.mergeInto(a.work.d.Action,a.work.d.Base),a.Action.prototype.calculateEffectiveTime=function(b){var c,d=a.xtGet(b,this.time),e=a.convertTime(d),f=e[1],g=e[0],h=0;return this.effectiveTime=0,"%"===g&&100>=f?this.ticker&&(c=a.animation[this.ticker],c&&(h=c.effectiveDuration,this.effectiveTime=h*(f/100))):this.effectiveTime=f,this},a.Action.prototype.addToTicker=function(b){var c,d=a.xt;return d(b)&&(this.ticker&&this.ticker!==b&&this.removeFromTicker(this.ticker),c=a.animation[b],d(c)&&(this.ticker=b,c.subscribe(this.name),this.calculateEffectiveTime())),this},a.Action.prototype.removeFromTicker=function(b){var c,d=a.xt;return d(b)&&(c=a.animation[b],d(c)&&(this.ticker="",c.unsubscribe(this.name))),this},a.Action.prototype.getEndTime=function(){return this.effectiveTime},a.Action.prototype.update=function(a){return this.reversed?a.reverseTick>=this.effectiveTime?this.triggered||(this.action(),this.triggered=!0):this.triggered&&(this.revert(),this.triggered=!1):a.tick>=this.effectiveTime?this.triggered||(this.action(),this.triggered=!0):this.triggered&&(this.revert(),this.triggered=!1),this.reverseOnCycleEnd&&a.willLoop&&(a.next?this.reversed=!this.reversed:(this.reversed=!1,this.triggered=!1)),!0},a.Action.prototype.set=function(b){var c,d=a.xt;return b=a.safeObject(b),c=d(b.ticker)?this.ticker:!1,c?(this.ticker=c,this.addToTicker(b.ticker)):d(b.time)&&(this.time=b.time,this.calculateEffectiveTime()),d(b.targets)&&this.setTargets(b.targets),a.xto(b.reverseOnCycleEnd,b.reversed,b.order)&&(d(b.reverseOnCycleEnd)&&(this.reverseOnCycleEnd=b.reverseOnCycleEnd),d(b.reversed)&&(this.reversed=b.reversed),d(b.order)&&(this.order=b.order)),d(b.triggered)&&this.triggered!==b.triggered&&(b.triggered?this.action():this.revert(),this.triggered=b.triggered),d(b.action)&&(this.action=b.action,"function"!=typeof this.action&&(this.action=function(){})),d(b.revert)&&(this.revert=b.revert,"function"!=typeof this.revert&&(this.revert=function(){})),this},a.Action.prototype.setTargets=function(b){b=[].concat(b);var c,d,e,f,g=[];for(d=0,e=b.length;e>d;d++)c=b[d],"function"==typeof c?"function"==typeof c.set&&g.push(c):"object"==typeof c&&a.xt(c.name)?g.push(c):(f=a.locateTarget(c),f&&g.push(f));return this.targets=g,this},a.Action.prototype.addToTargets=function(b){b=[].concat(b);var c,d,e,f;for(d=0,e=b.length;e>d;d++)c=b[d],"function"==typeof c?"function"==typeof c.set&&this.targets.push(c):(f=a.locateTarget(c),f&&this.targets.push(f));return this},a.Action.prototype.removeFromTargets=function(b){b=[].concat(b);{var c,d,e,f,g,h,i,j,k,l,m,n,o,p=[],q=[].concat(this.targets);a.contains}for(f=0,g=q.length;g>f;f++)j=q[f],k=j.type||"unknown",l=j.name||"unnamed","unknown"!==k&&"unnamed"!==l&&p.push(k+"_"+l);for(d=0,e=b.length;e>d;d++)c=b[d],n=!1,n="function"==typeof c?c:a.locateTarget(c),n&&(k=n.type||"unknown",l=n.name||"unnamed","unknown"!==k&&"unnamed"!==l&&(o=k+"_"+l,m=p.indexOf(o),m>=0&&(q[m]=!1)));for(this.targets=[],h=0,i=q;i>h;h++)q[h]&&this.targets.push(q[h]);return this},a.Action.prototype.clone=function(b){b=a.safeObject(b);var c,d=a.xt;return c=a.Base.prototype.clone.call(this,b),d(b.targets)?c.setTargets(b.targets):c.targets=[].concat(this.targets),c.reverseOnCycleEnd=d(b.reverseOnCycleEnd)?b.reverseOnCycleEnd:this.reverseOnCycleEnd,c.revert=d(b.revert)?b.revert:this.revert,c.action=d(b.action)?b.action:this.action,c.revert=d(b.revert)?b.revert:this.revert,c.time=d(b.time)?b.time:this.time,c.order=d(b.order)?b.order:this.order,c.triggered=!1,c.calculateEffectiveTime(),c},a.Action.prototype.kill=function(){return this.ticker&&this.removeFromTicker(this.ticker),delete a.tween[this.name],a.removeItem(a.tweennames,this.name),!0},a.Action.prototype.updateTargets=function(a){for(var b=0,c=this.targets.length;c>b;b++)this.targets[b].set(a);return this},a.Tween=function(b){var c,d=a.xtGet,e=a.xt;return a.Base.call(this,b),b=a.safeObject(b),this.ticker=d(b.ticker,""),a.xt(b.targets)?this.setTargets(b.targets):this.targets=[],this.definitions=e(b.definitions)?[].concat(b.definitions):[],this.setDefinitionsValues(),this.time=d(b.time,0),this.duration=d(b.duration,0),this.reverseOnCycleEnd=d(b.reverseOnCycleEnd,!1),this.reversed=d(b.reversed,!1),this.order=d(b.order,0),this.action=e(b.action)?b.action:!1,this.status="before",this.calculateEffectiveTime(),this.calculateEffectiveDuration(),a.tween[this.name]=this,a.pushUnique(a.tweennames,this.name),this.ticker="",a.xt(b.ticker)?this.addToTicker(b.ticker):(c=this.name+"_ticker",a.makeTicker({name:c,order:this.order,subscribers:this.name,duration:this.effectiveDuration,eventChoke:d(b.eventChoke,0),cycles:d(b.cycles,1),killOnComplete:d(b.killOnComplete,!1)}),this.ticker=c,a.animation[c].recalculateEffectiveDuration()),this},a.Tween.prototype=Object.create(a.Base.prototype),a.Tween.prototype.type="Tween",a.Tween.prototype.classname="tweennames",a.work.d.Tween={ticker:"",targets:[],definitions:[],time:0,action:!1,duration:0,reverseOnCycleEnd:!1,reversed:!1,order:0},a.mergeInto(a.work.d.Tween,a.work.d.Base),a.Tween.prototype.getEndTime=function(){return this.effectiveTime+this.effectiveDuration},a.Tween.prototype.calculateEffectiveTime=function(b){return a.Action.prototype.calculateEffectiveTime.call(this,b),this},a.Tween.prototype.calculateEffectiveDuration=function(b){var c,d=a.xtGet(b,this.duration),e=a.convertTime(d),f=e[1],g=e[0],h=0;return this.effectiveDuration=0,"%"===g?this.ticker&&(c=a.animation[this.ticker],c&&(h=c.effectiveDuration,this.effectiveDuration=h*(f/100))):this.effectiveDuration=f,this},a.Tween.prototype.addToTicker=function(b){return a.Action.prototype.addToTicker.call(this,b),this.calculateEffectiveDuration(),this},a.Tween.prototype.removeFromTicker=function(b){return a.Action.prototype.removeFromTicker.call(this,b),this},a.Tween.prototype.update=function(b){b=a.safeObject(b);var c,d,e=b.tick||0,f=b.reverseTick||0,g="running";return this.reversed?(c=this.effectiveTime+this.effectiveDuration,d=this.effectiveTime,f>c?g="after":d>f&&(g="before")):(c=this.effectiveTime,d=this.effectiveTime+this.effectiveDuration,c>e?g="before":e>d&&(g="after")),this.effectiveDuration?("running"===g||g!==this.status)&&(this.status=g,this.doSimpleUpdate(b),this.updateCleanup(b)):g!==this.status&&(this.status=g,this.doSimpleUpdate(b),this.updateCleanup(b)),b.willLoop&&(this.reverseOnCycleEnd?this.reversed=!this.reversed:this.status="before"),!0},a.Tween.prototype.doSimpleUpdate=function(b){b=a.safeObject(b);var c,d,e,f,g,h,i,j=this.effectiveTime,k=a.Tween.prototype.engineActions,l={};for(c=this.reversed?b.reverseTick-j:b.tick-j,i=this.effectiveDuration&&"running"===this.status?c/this.effectiveDuration:"after"===this.status?1:0,d=0,e=this.definitions.length;e>d;d++)h=this.definitions[d],h.value=h.engine.substring?k[h.engine](h.effectiveStart,h.effectiveChange,i):h.engine(h.effectiveStart,h.effectiveChange,i),h.integer&&(h.value=Math.round(h.value)),h.suffix&&(h.value+=h.suffix),l[h.attribute]=h.value;for(f=0,g=this.targets.length;g>f;f++)this.targets[f].set(l);return this.action&&this.action(),!0},a.Tween.prototype.updateCleanup=function(b){return b=a.safeObject(b),b.next||(this.status=this.reverse?"before":"after"),!0},a.Tween.prototype.engineActions={out:function(b,c,d){return b+c+Math.cos(90*d*a.work.radian)*-c},"in":function(b,c,d){return b+Math.sin(90*d*a.work.radian)*c},easeIn:function(a,b,c){var d=1-c;return a+b+d*d*-b},easeIn3:function(a,b,c){var d=1-c;return a+b+d*d*d*-b},easeIn4:function(a,b,c){var d=1-c;return a+b+d*d*d*d*-b},easeIn5:function(a,b,c){var d=1-c;return a+b+d*d*d*d*d*-b},easeOutIn:function(a,b,c){var d=1-c;return.5>c?a+c*c*b*2:a+b+d*d*-b*2},easeOutIn3:function(a,b,c){var d=1-c;return.5>c?a+c*c*c*b*4:a+b+d*d*d*-b*4},easeOutIn4:function(a,b,c){var d=1-c;return.5>c?a+c*c*c*c*b*8:a+b+d*d*d*d*-b*8},easeOutIn5:function(a,b,c){var d=1-c;return.5>c?a+c*c*c*c*c*b*16:a+b+d*d*d*d*d*-b*16},easeOut:function(a,b,c){return a+c*c*b},easeOut3:function(a,b,c){return a+c*c*c*b},easeOut4:function(a,b,c){return a+c*c*c*c*b},easeOut5:function(a,b,c){return a+c*c*c*c*c*b},linear:function(a,b,c){return a+c*b}},a.Tween.prototype.set=function(b){var c,d=a.xt;return b=a.safeObject(b),c=d(b.ticker)?this.ticker:!1,a.Base.prototype.set.call(this,b),c?(this.ticker=c,this.addToTicker(b.ticker)):a.xto(b.time,b.duration)&&(this.calculateEffectiveTime(),this.calculateEffectiveDuration()),d(b.targets)&&this.setTargets(b.targets),d(b.definitions)&&(this.definitions=[].concat(b.definitions),this.setDefinitionsValues()),d(b.action)&&(this.action=b.action,"function"!=typeof this.action&&(this.action=!1)),this},a.Tween.prototype.setDefinitionsValues=function(){var b,c,d,e,f=a.xt;for(b=0,c=this.definitions.length;c>b;b++)e=this.definitions[b],d=this.parseDefinitionsValue(e.start),e.effectiveStart=d[1],e.suffix=d[0],d=this.parseDefinitionsValue(e.end),e.effectiveEnd=d[1],f(e.engine)||(e.engine="linear"),e.effectiveChange=e.effectiveEnd-e.effectiveStart;return this},a.Tween.prototype.parseDefinitionsValue=function(b){var c,d=["",0],e=a.xt;return e(b)&&(b.toFixed?d[1]=b:b.substring&&(c=b.match(/^-?\d+\.?\d*(\D*)/),e(c[0])&&(d[1]=parseFloat(c)),e(c[1])&&(d[0]=c[1]))),d},a.Tween.prototype.setTargets=function(b){return a.Action.prototype.setTargets.call(this,b),this},a.Tween.prototype.addToTargets=function(b){return a.Action.prototype.addToTargets.call(this,b),this},a.Tween.prototype.removeFromTargets=function(b){return a.Action.prototype.removeFromTargets.call(this,b),this},a.Tween.prototype.clone=function(b){var c=a.Base.prototype.clone.call(this,b);return b=a.safeObject(b),b.targets||c.setTargets(this.targets),c},a.Tween.prototype.run=function(){var b=a.animation[this.ticker];return b&&b.run(),this},a.Tween.prototype.halt=function(){var b=a.animation[this.ticker];return b&&b.halt(),this},a.Tween.prototype.resume=function(){var b=a.animation[this.ticker];return b&&b.resume(),this},a.Tween.prototype.seekTo=function(b){var c=a.animation[this.ticker];return c&&c.seekTo(b),this},a.Tween.prototype.seekFor=function(b){var c=a.animation[this.ticker];return c&&c.seekFor(b),this},a.Tween.prototype.kill=function(){var b;this.ticker===this.name+"_ticker"&&(b=a.animation[this.ticker],b&&b.kill()),a.Action.prototype.kill.call(this)},a}(scrawl);