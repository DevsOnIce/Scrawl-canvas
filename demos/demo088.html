<!DOCTYPE html>
<html>

<head>
  <title>Demo 088</title>
  <link href="css/normalize.css" rel="stylesheet" />
  <link href="css/demo.css" rel="stylesheet" />
</head>

<body>
  <h1><a href="index.html">Scrawl.js</a> - demonstration 088</h1>
  <h2>The effects of .flipReverse and .flipUpend</h2>
  <h3>Modules: wheel, path, factories, phrase, animation</h3>
  <canvas id="mycanvas" width="600" height="400"></canvas>
  <p id="testmessage"></p>
  <script src="../source/scrawlCore.js"></script>
  <script id="myscript">
    var mycode = function() {
      'use strict'
      var testTicker = Date.now(),
        testTime = testTicker,
        testNow,
        testMessage = document.getElementById('testmessage');

      //define variables
      var carousel,
        myPad = scrawl.pad.mycanvas,
        myGroup = scrawl.group[myPad.base],
        myPin0,
        myPin1,
        myPin2,
        myPin3,
        myLabel0,
        myLabel1,
        myLabel2,
        myLabel3,
        updateLabels;

      //setup canvas
      scrawl.cell[myPad.base].set({
        backgroundColor: '#cfe8f8',
      });

      //define sprites
      carousel = scrawl.makeEllipse({
        name: 'carousel',
        startX: 300,
        startY: 200,
        radiusX: 200,
        radiusY: 100,
        method: 'draw',
      });

      myPin2 = scrawl.newWheel({
        name: 'pin2',
        radius: 5,
        fillStyle: 'black',
        path: 'carousel',
        pathPlace: 0,
        deltaPathPlace: 0.001,
      });
      myPin0 = myPin2.clone({
        name: 'pin0',
        fillStyle: 'red',
        pathPlace: 0.75,
      });
      myPin1 = myPin2.clone({
        name: 'pin1',
        fillStyle: 'green',
        pathPlace: 0.25,
      });
      myPin3 = myPin2.clone({
        name: 'pin3',
        fillStyle: 'blue',
        pathPlace: 0.5,
      });
      label2 = scrawl.newPhrase({
        name: 'normal',
        pivot: 'pin2',
        handleX: 'center',
        textAlign: 'center',
        font: '16pt Arial, sans-serif',
        handleY: '110%',
      });
      label0 = label2.clone({
        name: 'upended',
        pivot: 'pin0',
        flipUpend: true,
      });
      label1 = label2.clone({
        name: 'reversed',
        pivot: 'pin1',
        flipReverse: true,
      });
      label3 = label2.clone({
        name: 'both',
        pivot: 'pin3',
        flipReverse: true,
        flipUpend: true,
      });

      //animation function
      updateLabels = function() {
        label0.set({
          text: 'x: ' + Math.floor(myPin0.start.x) + ', y: ' + Math.floor(myPin0.start.y) + '\nI\'m upended',
        });
        label1.set({
          text: 'x: ' + Math.floor(myPin1.start.x) + ', y: ' + Math.floor(myPin1.start.y) + '\nI\'m reversed',
        });
        label2.set({
          text: 'x: ' + Math.floor(myPin2.start.x) + ', y: ' + Math.floor(myPin2.start.y) + '\nI\'m normal',
        });
        label3.set({
          text: 'x: ' + Math.floor(myPin3.start.x) + ', y: ' + Math.floor(myPin3.start.y) + '\nI\'m upended\nand reversed',
        });
      }

      //animation object
      scrawl.newAnimation({
        fn: function() {
          myGroup.updateStart();
          updateLabels();
          scrawl.render();

          testNow = Date.now();
          testTime = testNow - testTicker;
          testTicker = testNow;
          testMessage.innerHTML = 'Milliseconds per screen refresh: ' + parseInt(testTime) + '; fps: ' + parseInt(1000 / testTime);
        },
      });
    };

    scrawl.loadModules({
        path: '../source/js/',
        minified: false,
        modules: ['wheel', 'path', 'factories', 'phrase', 'animation'],
        callback: function() {
          window.addEventListener('load', function() {
              scrawl.init();
              mycode();
            };
          },
        });
  </script>
</body>

</html>
