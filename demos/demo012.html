<!DOCTYPE html>
 <html>
   <head>
		<title>Demo 012</title>
		<link href="css/normalize.css" rel="stylesheet" />
		<link href="css/demo.css" rel="stylesheet" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>
    <body>
		<h1><a href="index.html">Scrawl.js</a> - demonstration 012</h1>
		<h2>Moving sprites along the perimeter of a complex Shape</h2>
		<h3>Modules: wheel, path, animation</h3>
		<p>Pink ball travels at a constant speed; golden ball speed varies depending on its position on the path</p>
		<canvas id="mycanvas" width="400" height="400"></canvas>
		<p id="testmessage"></p>
		<script src="../source/scrawlCore.js"></script>
		<script id="myscript">
			var mycode = function(){
				'use strict'
				var testTicker = Date.now(),
					testTime = testTicker,
					testNow,
					testMessage = document.getElementById('testmessage');
				
				//define variables
				var myStar,
					balls,
					goldie,
					pinkie;
			
				//build a challenging path for balls to follow
				myStar = scrawl.makePath({
					name:			'star',
					data:			'm180,0-325,106q0-177 201,-277l0,342c0,-300 -250,0 -201,-277l325,106z',
					lineWidth:		5,
					strokeStyle:	'green',
					method:			'draw',
					lineJoin:		'round',
					angle:			144,
					startX:			200,
					startY:			200,
					shadowOffsetX:	4,
					shadowOffsetY:	4,
					shadowBlur:		2,
					shadowColor:	'black',
					precision:		20,
					});

				//add balls
				balls = scrawl.newGroup({
					name:	'balls',
					});
				goldie = scrawl.newWheel({
					group:				'balls',
					radius:				10,
					fillStyle:			'gold',
					method:				'fillDraw',
					shadowOffsetX:		2,
					shadowOffsetY:		2,
					shadowBlur:			2,
					shadowColor:		'black',
					order:				1,
					path:				'star',
					pathPlace:			0,
					deltaPathPlace:		0.001,
					pathSpeedConstant:	false,
					});
				pinkie = goldie.clone({
					fillStyle:			'pink',
					pathPlace:			0.5,
					pathSpeedConstant:	true,
					});
				for(var i = 1; i < 10; i++){
					goldie.clone({
						pathPlace: i/80,
						});
					pinkie.clone({
						pathPlace: (i/80) + 0.5,
						});
					}

				//animation object
				scrawl.newAnimation({
					fn: function(){
						myStar.setDelta({
							roll: 0.1,
							});
						balls.updateStart('path');
						scrawl.render();
						
						testNow = Date.now();
						testTime =  testNow - testTicker;
						testTicker = testNow;
						testMessage.innerHTML = 'Milliseconds per screen refresh: '+parseInt(testTime)+'; fps: '+parseInt(1000/testTime);
						},
					});
				};
				
			scrawl.loadModules({
				path: '../source/',
				minified: false,
				modules: ['wheel', 'path', 'animation'],
				callback: function(){
					window.addEventListener('load', function(){
						scrawl.init();
						mycode();
						}, false);
					},
				});
		</script>
    </body>
</html>
