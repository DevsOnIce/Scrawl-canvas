<!DOCTYPE html>
<html>
	<head>
		<title>Scrawl.js</title>
		<link href="css/prism.css" rel="stylesheet" />
		<link href="css/demo.css" rel="stylesheet" />
	</head>
	<body>
		<h1><a href="index.html">Scrawl.js</a> - demonstration 209</h1>
		<h2>Position DOM elements using pivot</h2>
		<h3>Modules: shape, phrase, path, wheel, stacks</h3>
		<div id="mystack" class="scrawlstack">
			<canvas id="mycanvas" width="600" height="400"></canvas>
			<select id="Sun">
				<option value="0">0%</option>
				<option value="0.2">20%</option>
				<option value="0.4">40%</option>
				<option value="0.6">60%</option>
				<option value="0.8">80%</option>
				<option value="1">100%</option>
			</select>
			<select id="Mon">
				<option value="0">0%</option>
				<option value="0.2">20%</option>
				<option value="0.4">40%</option>
				<option value="0.6">60%</option>
				<option value="0.8">80%</option>
				<option value="1">100%</option>
			</select>
			<select id="Tue">
				<option value="0">0%</option>
				<option value="0.2">20%</option>
				<option value="0.4">40%</option>
				<option value="0.6">60%</option>
				<option value="0.8">80%</option>
				<option value="1">100%</option>
			</select>
			<select id="Wed">
				<option value="0">0%</option>
				<option value="0.2">20%</option>
				<option value="0.4">40%</option>
				<option value="0.6">60%</option>
				<option value="0.8">80%</option>
				<option value="1">100%</option>
			</select>
			<select id="Thu">
				<option value="0">0%</option>
				<option value="0.2">20%</option>
				<option value="0.4">40%</option>
				<option value="0.6">60%</option>
				<option value="0.8">80%</option>
				<option value="1">100%</option>
			</select>
			<select id="Fri">
				<option value="0">0%</option>
				<option value="0.2">20%</option>
				<option value="0.4">40%</option>
				<option value="0.6">60%</option>
				<option value="0.8">80%</option>
				<option value="1">100%</option>
			</select>
			<select id="Sat">
				<option value="0">0%</option>
				<option value="0.2">20%</option>
				<option value="0.4">40%</option>
				<option value="0.6">60%</option>
				<option value="0.8">80%</option>
				<option value="1">100%</option>
			</select>
		</div>
		<script src="js/scrawlCore.js"></script>
		<script>
			var mycode = function(){
				//define variables
				var grid,
					line,
					yOffsetStep = 75,
					xOffsetStep = 60,
					yAxisLabels = ['100%','75%','50%','25%','0%'],
					yLabel = 'Percentage',
					xAxisLabels = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],
					updateLine;

				//event listener function
				updateLine = function(e){
					//get new data
					var target = e.target.id,
						value = e.target.value,
						index = xAxisLabels.indexOf(target) + 1;
					//calculate point's new position
					scrawl.point['line_p'+index].set({
						startY: -(300 * value),
						});
					//update chart view
					scrawl.render();
					e.preventDefault();
					e.returnValue=false;
					};

				//define the grid object - all other objects will pivot from this
				grid = scrawl.newShape({
					name: 'grid',
					//draw axes and ticks
					data: 'L0,0 0,300 480,300 M0,0 -5,0 M0,75 -5,75 M0,150 -5,150 M0,225 -5,225 M0,300 -5,300 M60,300 60,305 M120,300 120,305 M180,300 180,305 M240,300 240,305 M300,300 300,305 M360,300 360,305 M420,300 420,305',
					lineWidth: 2,
					//position the grid absolutely on the canvas
					startX: 100,
					startY: 20,
					});

				//Labels for the grid axes
				for(var i = 0, z = yAxisLabels.length; i < z; i++){
					scrawl.newPhrase({		//y-axis percent labels
						pivot: 'grid',
						family: 'monospace',
						handleX: 45 - ((4 - yAxisLabels[i].length) * 10),
						handleY: (-yOffsetStep * i) + 10,
						text: yAxisLabels[i],
						});
					}
				scrawl.newPhrase({			//y-axis title
					pivot: 'grid',
					size: 20,
					text: 'Percentage',
					handleX: '160%',
					handleY: '270%',
					roll: -90,
					});
				for(var i = 0, z = xAxisLabels.length; i < z; i++){
					scrawl.newPhrase({		//x-axis day labels
						name: xAxisLabels[i],
						pivot: 'grid',
						family: 'monospace',
						handleX: (-xOffsetStep * i) - xOffsetStep + 9,
						handleY: -310,
						text: xAxisLabels[i],
						});
					//Position the selector boxes at the same time ...
					scrawl.element[xAxisLabels[i]].set({
						pivot: 'grid',
						handleX: (-xOffsetStep * i) - xOffsetStep + 23,
						handleY: -330,
						});
					//... then set their initial values, and add event listeners to them
					scrawl.elm[xAxisLabels[i]].value = 0;
					scrawl.elm[xAxisLabels[i]].addEventListener('change', updateLine, false);
					}
					
				//define and position the graph line ...
				line = scrawl.makePath({
					name: 'line',
					data: 'M60,0 120,0 180,0 240,0 300,0,360,0 420,0',
					mark: 'circle',
					pivot: 'grid',
					handleX: -5,
					handleY: -300,
					lineWidth: 4,
					});
				//... and the line marks
				scrawl.newWheel({
					name: 'circle',
					radius: 10,
					fillStyle: 'red',
					visibility: false,
					method: 'fillDraw',
					});
					
				//display initial scene
				scrawl.render();
				scrawl.renderElements();
				};
				
			scrawl.loadModules({
				path: 'js/',
				modules: ['shape', 'phrase', 'path', 'wheel', 'stacks'],
				callback: function(){
					window.onload = function(){
						scrawl.init();
						mycode();
						};
					},
				});
		</script>
<pre><code class="language-markup">&lt;body>
	&lt;div id="mystack" class="scrawlstack">
		&lt;canvas id="mycanvas" width="600" height="400">&lt;/canvas>
		&lt;select id="Sun">
			&lt;option value="0">0%&lt;/option>
			&lt;option value="0.2">20%&lt;/option>
			&lt;option value="0.4">40%&lt;/option>
			&lt;option value="0.6">60%&lt;/option>
			&lt;option value="0.8">80%&lt;/option>
			&lt;option value="1">100%&lt;/option>
		&lt;/select>
		&lt;select id="Mon">
			&lt;option value="0">0%&lt;/option>
			&lt;option value="0.2">20%&lt;/option>
			&lt;option value="0.4">40%&lt;/option>
			&lt;option value="0.6">60%&lt;/option>
			&lt;option value="0.8">80%&lt;/option>
			&lt;option value="1">100%&lt;/option>
		&lt;/select>
		&lt;select id="Tue">
			&lt;option value="0">0%&lt;/option>
			&lt;option value="0.2">20%&lt;/option>
			&lt;option value="0.4">40%&lt;/option>
			&lt;option value="0.6">60%&lt;/option>
			&lt;option value="0.8">80%&lt;/option>
			&lt;option value="1">100%&lt;/option>
		&lt;/select>
		&lt;select id="Wed">
			&lt;option value="0">0%&lt;/option>
			&lt;option value="0.2">20%&lt;/option>
			&lt;option value="0.4">40%&lt;/option>
			&lt;option value="0.6">60%&lt;/option>
			&lt;option value="0.8">80%&lt;/option>
			&lt;option value="1">100%&lt;/option>
		&lt;/select>
		&lt;select id="Thu">
			&lt;option value="0">0%&lt;/option>
			&lt;option value="0.2">20%&lt;/option>
			&lt;option value="0.4">40%&lt;/option>
			&lt;option value="0.6">60%&lt;/option>
			&lt;option value="0.8">80%&lt;/option>
			&lt;option value="1">100%&lt;/option>
		&lt;/select>
		&lt;select id="Fri">
			&lt;option value="0">0%&lt;/option>
			&lt;option value="0.2">20%&lt;/option>
			&lt;option value="0.4">40%&lt;/option>
			&lt;option value="0.6">60%&lt;/option>
			&lt;option value="0.8">80%&lt;/option>
			&lt;option value="1">100%&lt;/option>
		&lt;/select>
		&lt;select id="Sat">
			&lt;option value="0">0%&lt;/option>
			&lt;option value="0.2">20%&lt;/option>
			&lt;option value="0.4">40%&lt;/option>
			&lt;option value="0.6">60%&lt;/option>
			&lt;option value="0.8">80%&lt;/option>
			&lt;option value="1">100%&lt;/option>
		&lt;/select>
	&lt;/div>
	&lt;script src="js/scrawlCore.js">&lt;/script>
	&lt;script>
		var mycode = function(){
			//define variables
			var grid,
				line,
				yOffsetStep = 75,
				xOffsetStep = 60,
				yAxisLabels = ['100%','75%','50%','25%','0%'],
				yLabel = 'Percentage',
				xAxisLabels = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],
				updateLine;

			//event listener function
			updateLine = function(e){
				//get new data
				var target = e.target.id,
					value = e.target.value,
					index = xAxisLabels.indexOf(target) + 1;
				//calculate point's new position
				scrawl.point['line_p'+index].set({
					startY: -(300 * value),
					});
				//update chart view
				scrawl.render();
				e.preventDefault();
				e.returnValue=false;
				};

			//define the grid object - all other objects will pivot from this
			grid = scrawl.newShape({
				name: 'grid',
				//draw axes and ticks
				data: 'L0,0 0,300 480,300 M0,0 -5,0 M0,75 -5,75 M0,150 -5,150 M0,225 -5,225 M0,300 -5,300 M60,300 60,305 M120,300 120,305 M180,300 180,305 M240,300 240,305 M300,300 300,305 M360,300 360,305 M420,300 420,305',
				lineWidth: 2,
				//position the grid absolutely on the canvas
				startX: 100,
				startY: 20,
				});

			//Labels for the grid axes
			for(var i = 0, z = yAxisLabels.length; i &lt; z; i++){
				scrawl.newPhrase({		//y-axis percent labels
					pivot: 'grid',
					family: 'monospace',
					handleX: 45 - ((4 - yAxisLabels[i].length) * 10),
					handleY: (-yOffsetStep * i) + 10,
					text: yAxisLabels[i],
					});
				}
			scrawl.newPhrase({			//y-axis title
				pivot: 'grid',
				size: 20,
				text: 'Percentage',
				handleX: '160%',
				handleY: '270%',
				roll: -90,
				});
			for(var i = 0, z = xAxisLabels.length; i &lt; z; i++){
				scrawl.newPhrase({		//x-axis day labels
					name: xAxisLabels[i],
					pivot: 'grid',
					family: 'monospace',
					handleX: (-xOffsetStep * i) - xOffsetStep + 9,
					handleY: -310,
					text: xAxisLabels[i],
					});
				//Position the selector boxes at the same time ...
				scrawl.element[xAxisLabels[i]].set({
					pivot: 'grid',
					handleX: (-xOffsetStep * i) - xOffsetStep + 23,
					handleY: -330,
					});
				//... then set their initial values, and add event listeners to them
				scrawl.elm[xAxisLabels[i]].value = 0;
				scrawl.elm[xAxisLabels[i]].addEventListener('change', updateLine, false);
				}
				
			//define and position the graph line ...
			line = scrawl.makePath({
				name: 'line',
				data: 'M60,0 120,0 180,0 240,0 300,0,360,0 420,0',
				mark: 'circle',
				pivot: 'grid',
				handleX: -5,
				handleY: -300,
				lineWidth: 4,
				});
			//... and the line marks
			scrawl.newWheel({
				name: 'circle',
				radius: 10,
				fillStyle: 'red',
				visibility: false,
				method: 'fillDraw',
				});
				
			//display initial scene
			scrawl.render();
			scrawl.renderElements();
			};
			
		scrawl.loadModules({
			path: 'js/',
			modules: ['shape', 'phrase', 'path', 'wheel', 'stacks'],
			callback: function(){
				window.onload = function(){
					scrawl.init();
					mycode();
					};
				},
			});
	&lt;/script>
&lt;/body></code></pre>
		<script src="js/prism.js"></script>
	</body>
</html>
