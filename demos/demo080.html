<!DOCTYPE html>
<html>
	<head>
		<title>Scrawl.js</title>
		<link href="css/prism.css" rel="stylesheet" />
		<link href="css/demo.css" rel="stylesheet" />
	</head>
	<body>
		<h1><a href="index.html">Scrawl.js</a> - demonstration 080</h1>
		<h2>Scrawl.js spirograph-like simulation</h2>
		<h3>Modules: color, path, factories, wheel, animation</h3>
		<canvas id="mycanvas" width="400" height="400"></canvas>
		<p id="testmessage"></p>
		<script src="js/scrawlCore.js"></script>
		<script>
			var mycode = function(){
				var testTicker = Date.now(),
					testTime = testTicker,
					testNow,
					testMessage = document.getElementById('testmessage');
					
				//define variables
				var myCol,
					s1rotate = 0.5,
					s2rotate = -1,
					s1scale = 0.05,
					currentScale;
					
				//define cells
				scrawl.addNewCell({
					name: 		'struts',
					});
				scrawl.addNewCell({
					name: 		'paper',
					});
				scrawl.setDrawOrder(['paper', 'struts']);
				
				//define designs (color)
				myCol = scrawl.newColor({
					name: 		'myCol',
					random: 	true,
					a: 			1,
					rMax: 		200,
					gMax: 		200,
					bMax: 		200,
					rBounce: 	true,
					gBounce: 	true,
					bBounce: 	true,
					rShift: 	7,
					gShift: 	6,
					bShift: 	5,
					});
				
				//define sprites
				scrawl.makeLine({
					name: 		'strutOne',
					startX: 	200,
					startY: 	200,
					endX: 		300,
					endY: 		200,
					lineWidth: 	2,
					method: 	'draw',
					fixed: 		'start',
					group: 		'struts',
					});
				scrawl.makeLine({
					name: 		'strutTwo',
					endX: 		375,
					endY: 		200,
					startX: 	300,
					startY: 	200,
					lineWidth: 	2,
					method: 	'draw',
					group: 		'struts',
					pivot: 		'strutOne_p2',
					});
				scrawl.newWheel({
					pivot: 		'strutOne_p1',
					radius: 	5,
					method: 	'fillDraw',
					fillStyle: 	'red',
					group: 		'struts',
					order: 		1,
					}).clone({
					pivot: 		'strutOne_p2',
					}).clone({
					radius: 	3,
					pivot: 		'strutTwo_p2',
					});
				scrawl.cell.struts.compile();
				
				scrawl.newWheel({
					name: 		'pen',
					pivot: 		'strutTwo_p2',
					radius: 	1,
					method: 	'fill',
					fillStyle: 	'myCol',
					group: 		'paper',
					order: 		0,
					});
				
				//define animation functions
				var moveStruts = function(){
					scrawl.sprite.strutOne.setDelta({
						roll: s1rotate,
						});
					scrawl.sprite.strutTwo.setDelta({
						roll: s2rotate,
						});
					if(scrawl.sprite.strutOne.roll > 360){
						currentScale = scrawl.sprite.strutOne.get('scale');
						scrawl.sprite.strutOne.roll -= 360;
						if(!scrawl.isBetween((currentScale + s1scale), 0.3, 1, true)){s1scale = -s1scale;}
						scrawl.sprite.strutOne.setDelta({
							scale: s1scale,
							});
						scrawl.sprite.strutOne.set({
							lineWidth: (1/currentScale) * 2,
							});
						myCol.update();
						}
					};

				//animation object
				scrawl.newAnimation({
					fn: function(){
						moveStruts();
						scrawl.render({
							clear: ['struts', 'mycanvas_base'],
							});
						
						testNow = Date.now();
						testTime =  testNow - testTicker;
						testTicker = testNow;
						testMessage.innerHTML = 'Milliseconds per screen refresh: '+parseInt(testTime)+'; fps: '+parseInt(1000/testTime);
						},
					});
				};
				
			scrawl.loadModules({
				path: 'js/',
				modules: ['color', 'path', 'factories', 'wheel', 'animation'],
				callback: function(){
					window.onload = function(){
						scrawl.init();
						mycode();
						};
					},
				});
		</script>
<pre><code class="language-javascript">var mycode = function(){
	//define variables
	var myCol,
		s1rotate = 0.5,
		s2rotate = -1,
		s1scale = 0.05,
		currentScale;
		
	//define cells
	scrawl.addNewCell({
		name: 		'struts',
		});
	scrawl.addNewCell({
		name: 		'paper',
		});
	scrawl.setDrawOrder(['paper', 'struts']);
	
	//define designs (color)
	myCol = scrawl.newColor({
		name: 		'myCol',
		random: 	true,
		a: 			1,
		rMax: 		200,
		gMax: 		200,
		bMax: 		200,
		rBounce: 	true,
		gBounce: 	true,
		bBounce: 	true,
		rShift: 	7,
		gShift: 	6,
		bShift: 	5,
		});
	
	//define sprites
	scrawl.makeLine({
		name: 		'strutOne',
		startX: 	200,
		startY: 	200,
		endX: 		300,
		endY: 		200,
		lineWidth: 	2,
		method: 	'draw',
		fixed: 		'start',
		group: 		'struts',
		});
	scrawl.makeLine({
		name: 		'strutTwo',
		endX: 		375,
		endY: 		200,
		startX: 	300,
		startY: 	200,
		lineWidth: 	2,
		method: 	'draw',
		group: 		'struts',
		pivot: 		'strutOne_p2',
		});
	scrawl.newWheel({
		pivot: 		'strutOne_p1',
		radius: 	5,
		method: 	'fillDraw',
		fillStyle: 	'red',
		group: 		'struts',
		order: 		1,
		}).clone({
		pivot: 		'strutOne_p2',
		}).clone({
		radius: 	3,
		pivot: 		'strutTwo_p2',
		});
	scrawl.cell.struts.compile();
	
	scrawl.newWheel({
		name: 		'pen',
		pivot: 		'strutTwo_p2',
		radius: 	1,
		method: 	'fill',
		fillStyle: 	'myCol',
		group: 		'paper',
		order: 		0,
		});
	
	//define animation functions
	var moveStruts = function(){
		scrawl.sprite.strutOne.setDelta({
			roll: s1rotate,
			});
		scrawl.sprite.strutTwo.setDelta({
			roll: s2rotate,
			});
		if(scrawl.sprite.strutOne.roll > 360){
			currentScale = scrawl.sprite.strutOne.get('scale');
			scrawl.sprite.strutOne.roll -= 360;
			if(!scrawl.isBetween((currentScale + s1scale), 0.3, 1, true)){s1scale = -s1scale;}
			scrawl.sprite.strutOne.setDelta({
				scale: s1scale,
				});
			scrawl.sprite.strutOne.set({
				lineWidth: (1/currentScale) * 2,
				});
			myCol.update();
			}
		};

	//animation object
	scrawl.newAnimation({
		fn: function(){
			moveStruts();
			scrawl.render({
				clear: ['struts', 'mycanvas_base'],
				});
			},
		});
	};
	
scrawl.loadModules({
	path: 'js/',
	modules: ['color', 'path', 'factories', 'wheel', 'animation'],
	callback: function(){
		window.onload = function(){
			scrawl.init();
			mycode();
			};
		},
	});</code></pre>
		<script src="js/prism.js"></script>
    </body>
</html>
